{"filter":false,"title":"zmqserver.dats","tooltip":"/zmqserver.dats","undoManager":{"mark":2,"position":2,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":32,"column":1},"action":"insert","lines":["#include \"share/atspre_staload.hats\"","staload \"/home/ubuntu/contrib/contrib/zeromq/SATS/zmq.sats\"","","","implement main0 () = () where {","  var major: int","  and minor: int","  and patch: int","  ","  fun loop (socket: !zmqsock1): void = () where {","      var msg : zmqmsg_t","      val () = zmq_msg_init_exn (msg)","      val _ = zmq_msg_recv_exn (msg, socket, 0)","      val _ = $extfcall (void, \"printf\", \"%s\", zmqmsg_data (msg))","      val () = zmq_msg_close_exn (msg)","      ","      val () = zmq_msg_init_size_exn (msg, g1i2u 5)","      val () = $extfcall (void, \"memcpy\", zmqmsg_data (msg), \"world\", 5)","      val _ = zmq_msg_send (msg, socket, 0)","      val () = zmq_msg_close_exn (msg)","  }","  ","  val () = zmq_version(major, minor, patch)","  val () = println! (\"Installed ZeroMQ version: \", major, \".\", minor, \".\", patch)","  ","  val ctx = zmq_ctx_new_exn ()","  val stream = zmq_socket_exn (ctx, ZMQ_STREAM)","  val () = zmq_bind_exn (stream, \"tcp//*:8888\")","  val () = loop (stream)","  ","  val () = zmq_close_exn (stream)","  val () = zmq_ctx_destroy_exn (ctx)","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":50},"end":{"row":13,"column":51},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":45},"end":{"row":17,"column":46},"action":"insert","lines":["_"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":18,"column":19},"end":{"row":18,"column":19},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1426605665000,"hash":"ab1ca453d1bfc7468b12ed9141c80c32db9c8403"}